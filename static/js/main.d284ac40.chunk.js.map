{"version":3,"sources":["components/Instructions.js","components/Redirector.js","components/Edit.js","components/Update.js","components/App.js","index.js"],"names":["Instructions","className","to","React","Component","Redirector","state","urlToUse","readyToGo","usersURL","usersChosenUUID","window","location","href","substring","lastIndexOf","length","console","log","this","props","currentUrls","forEach","url","url_uuid","url_value","setState","parse","Edit","id","uuidv4","submitted","update","e","target","name","value","formSubmitted","preventDefault","uuid","urlDest","fetch","onSubmit","addUrl","type","readOnly","onChange","text","onClick","urlValid","validateUUID","includes","oldURL","urlFront","actUUID","uuidv4Valid","updateUrl","hidden","style","color","disabled","App","urls","loadedURLs","justCreatedLink","createdLinkUUID","createdLinkURL","then","r","json","data","content","rel","basename","exact","path","addURL","Update","updateURL","getURLData","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d284ac40.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { HashRouter as Router, Link} from \"react-router-dom\";\r\n\r\nclass Instructions extends React.Component{\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"content\">\r\n                <h2 className=\"pageTitle\">Usage</h2>\r\n                <h3 className=\"subTitle\">Editing a Link</h3>\r\n                <p>To edit a link, go <b><Link to=\"/edit/\">here</Link></b>.</p>\r\n                <h3 className=\"subTitle\">Update a Link</h3>\r\n                <p>To update a link, go <b><Link to=\"/update/\">here</Link></b>.</p>\r\n                <h3 className=\"subTitle\">To Redirect to a Link</h3>\r\n                <p>Visit this domain with <b>'/redirect/[uuid]'</b> in the URL.</p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Instructions;","import React from \"react\";\r\n\r\nclass Redirector extends React.Component{\r\n\r\n    state={\r\n        urlToUse: \"\",\r\n        readyToGo: false,\r\n    }\r\n\r\n    parse(){\r\n        var usersChosenUUID = window.location.href.substring(window.location.href.lastIndexOf(\"/\")+1,window.location.href.length);\r\n        console.log(usersChosenUUID);\r\n        var usersURL;\r\n        this.props.currentUrls.forEach(url => {\r\n            if(url.url_uuid === usersChosenUUID){\r\n                usersURL = url.url_value\r\n            }\r\n        })\r\n        if(usersURL[0] !== \"h\"){\r\n            usersURL = \"https://\"+usersURL;\r\n        }\r\n        this.setState({\r\n            urlToUse: usersURL,\r\n            readyToGo: true\r\n        })\r\n        console.log(usersURL);\r\n        \r\n    }\r\n\r\n    render(){\r\n        if(this.state.readyToGo){\r\n            window.location.href = this.state.urlToUse;\r\n            return(\r\n                <h1>Redirecting you...</h1>\r\n            )\r\n        }else{\r\n            this.parse()\r\n            return(\r\n                <h1>Parsing UUID...</h1>\r\n            )\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Redirector;","import React from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\r\n\r\nclass Edit extends React.Component{\r\n\r\n    state = {\r\n        id: uuidv4(),\r\n        url: \"\",\r\n        submitted: false,\r\n    }\r\n\r\n    update = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value,\r\n        })\r\n    }\r\n\r\n    formSubmitted = (e) =>{\r\n        e.preventDefault();\r\n        this.setState({\r\n            submitted: true\r\n        });\r\n        console.log(e);\r\n        var uuid = this.state.id;\r\n        var urlDest = this.state.url;\r\n        console.log(\"UUID: \"+uuid);\r\n        console.log(\"URL Dest: \"+urlDest);\r\n        fetch(\"https://cors-anywhere.herokuapp.com/http://kunet.kingston.ac.uk/k1625608/updateUrls/addUrl.php?uuid=\"+uuid+\"&url=\"+urlDest);\r\n    }\r\n\r\n    render(){\r\n        if(!this.state.submitted){\r\n            return(\r\n                <div>\r\n                    <h2 className=\"pageTitle\">Create a Link</h2>\r\n                    <p className=\"pageInstructions\">Enter a destination. Your new URL will be copied to clipboard automatically</p>\r\n                    <div className=\"formSpacer\">&nbsp;</div>\r\n                    <div className=\"formParent\">\r\n                        <form onSubmit={this.props.addUrl}>\r\n                            <label className=\"formLabel\"><b>URL ID: {\" \"}</b></label>\r\n                            <input className=\"inputField\" type=\"text\" name=\"id\" value={this.state.id} readOnly></input>\r\n                            <br />\r\n                            <label className=\"formLabel\"><b>URL Destination:</b>{\" \"}</label>\r\n                            <input className=\"inputField\"  type=\"text\" name=\"url\" value={this.state.url} onChange={this.update}></input>\r\n                            <br />\r\n                            <br />\r\n                            <CopyToClipboard text={\"https://relishedchicken.github.io/url-redirect-system/#/redirect/\"+this.state.id}>\r\n                                <button onClick={this.formSubmitted} className=\"submitButton\">Submit {\"&\"} Copy to Clipboard</button>\r\n                            </CopyToClipboard>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"formSpacer\">&nbsp;</div>\r\n                </div>\r\n            )\r\n        }else{\r\n            return(\r\n                <>\r\n                    <h2 className=\"pageTitle\">Thanks! Your link has been created and is as follows:</h2>\r\n                    <p className=\"pageInstructions\">UUID: {this.state.id}</p>\r\n                    <p className=\"pageInstructions\">URL: {this.state.url}</p>\r\n                    <p className=\"pageInstructions\">Hint: Your redirect link has already been copied to your clipboard</p>\r\n                </>\r\n            )\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Edit;","import React from \"react\";\r\nimport { v4 as uuidv4, validate as uuidv4Valid } from \"uuid\";\r\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\r\n\r\nclass Edit extends React.Component{\r\n\r\n    state = {\r\n        id: \"\",\r\n        url: \"\",\r\n        submitted: false,\r\n        urlValid: true\r\n    }\r\n\r\n    update = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value,\r\n        }, this.validateUUID);\r\n        \r\n    }\r\n\r\n    validateUUID(){\r\n        var oldURL = this.state.id;\r\n        console.log(oldURL);\r\n        var urlFront = oldURL.substring(0,oldURL.lastIndexOf(\"/\"));\r\n        var actUUID = oldURL.substring(oldURL.lastIndexOf(\"/\")+1, oldURL.length);\r\n        console.log(urlFront);\r\n        if(urlFront === \"https://relishedchicken.github.io/url-redirect-system/#/redirect\" && oldURL.includes(\"http\") && uuidv4Valid(actUUID)){\r\n            this.setState({\r\n                urlValid: false\r\n            })\r\n        }else{\r\n            this.setState({\r\n                urlValid: true\r\n            })\r\n        }\r\n    }\r\n\r\n    formSubmitted = (e) =>{\r\n        e.preventDefault();\r\n        this.setState({\r\n            submitted: true\r\n        });\r\n        var urlDest = this.state.url;\r\n        console.log(urlDest);\r\n        if(!urlDest.includes(\"http\")){\r\n            urlDest = \"http://\" + urlDest;\r\n        }\r\n        var uuid = this.state.id;\r\n        uuid = uuid.substring(uuid.lastIndexOf(\"/\")+1,uuid.length);\r\n        if(urlDest !== \"\"){\r\n            fetch(\"https://cors-anywhere.herokuapp.com/http://kunet.kingston.ac.uk/k1625608/updateUrls/updateUrl.php?uuid=\"+uuid+\"&url=\"+urlDest);\r\n        } \r\n    }\r\n\r\n    render(){\r\n        if(!this.state.submitted){\r\n            return(\r\n                <div>\r\n                    <h2 className=\"pageTitle\">Update an Exiting Link</h2>\r\n                    <p className=\"pageInstructions\">Paste your old link below and a new destination.</p>\r\n                    <div className=\"formSpacer\">&nbsp;</div>\r\n                    <div className=\"formParent\">\r\n                        <form onSubmit={this.props.updateUrl}>\r\n                            <label className=\"formLabel\"><b>Old URL: {\" \"}</b></label>\r\n                            <input className=\"inputField\" type=\"text\" name=\"id\" value={this.state.id} onChange={this.update}></input>\r\n                            <br />\r\n                            <label className=\"formLabel\"><b>URL Destination:</b>{\" \"}</label>\r\n                            <input className=\"inputField\"  type=\"text\" name=\"url\" value={this.state.url} onChange={this.update}></input>\r\n                            <br />\r\n                            <br />\r\n                            <p hidden={!this.state.urlValid} className=\"pageInstructions\" style={{color: \"red\"}}>Please make sure your Old URL is valid.</p>\r\n                            <CopyToClipboard text={\"https://relishedchicken.github.io/url-redirect-system/#/redirect/\"+this.state.id}>\r\n                                <button onClick={this.formSubmitted} className=\"submitButton\" disabled={this.state.urlValid} >Update {\"&\"} Copy to Clipboard</button>\r\n                            </CopyToClipboard>\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"formSpacer\">&nbsp;</div>\r\n                </div>\r\n            )\r\n        }else{\r\n            return(\r\n                <>\r\n                    <h2 className=\"pageTitle\">Thanks! Your link has been updated and is as follows:</h2>\r\n                    <p className=\"pageInstructions\">UUID: {this.state.id}</p>\r\n                    <p className=\"pageInstructions\">URL: {this.state.url}</p>\r\n                    <p className=\"pageInstructions\">Hint: Your redirect link has already been copied to your clipboard</p>\r\n                </>\r\n            )\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Edit;","import React from \"react\";\r\nimport { HashRouter as Router, Switch, Route, Link} from \"react-router-dom\";\r\nimport Instructions from \"./Instructions\";\r\nimport Redirector from \"./Redirector\";\r\nimport Edit from \"./Edit\";\r\nimport Update from \"./Update\";\r\nimport \"./App.css\";\r\n\r\nclass App extends React.Component{\r\n\r\n    state={\r\n        urls:[],\r\n        loadedURLs: false,\r\n        justCreatedLink: false,\r\n        createdLinkUUID: \"\",\r\n        createdLinkURL: \"\"\r\n    }\r\n\r\n    getURLData(){\r\n        fetch(\"https://cors-anywhere.herokuapp.com/http://kunet.kingston.ac.uk/k1625608/updateUrls/getUrls.php\").then(r=>r.json()).then((data) => {\r\n            this.setState({\r\n                urls: data\r\n            })\r\n            console.log(\"loaded!\");\r\n            this.setState({\r\n                loadedURLs: true\r\n            })\r\n        })\r\n        \r\n    }\r\n\r\n    render(){\r\n        if(this.state.loadedURLs){\r\n            return(\r\n                <div>\r\n                    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0\"/>\r\n                    <link rel=\"shortcut icon\" href=\"./favicon.ico\" type=\"image/x-icon\"></link>\r\n                    <h1 className=\"title\">Simple Persistant URL Redirector</h1>\r\n                    <Router>\r\n                        <div className=\"menuContainer\">\r\n                            <div className=\"menuBar\">\r\n                                <Link to=\"/#/\"><div className=\"link\">Home</div></Link>\r\n                                <Link to=\"/edit/\"><div className=\"link\">Create Link</div></Link>\r\n                                <Link to=\"/update/\"><div className=\"link\">Update Link</div></Link>\r\n                            </div>\r\n                        </div>\r\n                        <Switch>\r\n                            <Route basename=\"/url-redirect-system/#/\" exact path=\"/\" >\r\n                                <Instructions />\r\n                            </Route>\r\n                            <Route basename=\"/url-redirect-system/#/\" path=\"/redirect\" >\r\n                                <Redirector currentUrls={this.state.urls}/>\r\n                            </Route>\r\n                            <Route basename=\"/url-redirect-system/#/\" path=\"/edit\" >\r\n                                <Edit addUrl={this.addURL}/>\r\n                            </Route>\r\n                            <Route basename=\"/url-redirect-system/#/\" path=\"/update\" >\r\n                                <Update updateUrl={this.updateURL}/>\r\n                            </Route>\r\n                        </Switch>\r\n                    </Router>\r\n                </div>\r\n            )\r\n        }else{\r\n            this.getURLData();\r\n            return(\r\n                <>\r\n                    <h1 className=\"title\">Simple Persistant URL Redirector</h1>\r\n                    <div>\r\n                        <h2 className=\"pageTitle\">Please Wait</h2>\r\n                        <h4 className=\"pageDetail\">Loading latest data...</h4>\r\n                    </div>\r\n                </>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default App;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\"\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}